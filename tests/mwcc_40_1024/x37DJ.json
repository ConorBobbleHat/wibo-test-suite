{"compiler": "mwcc_40_1024", "compiler_flags": "-O4,p -enum int -proc arm946e -gccext,on -fp soft -lang c99 -char signed -inline on,noauto -Cpp_exceptions off -gccinc -interworking -gccdep -MD -g", "source_code": "extern const u8 DATA_021D6C24[];\nextern void func_0x02020cf0(void*, int, u16);\nu32 FUN_0219e048(u32 ,u8);\nint FUN_0219c408(int, u8);\nBTL_POKEPARAM* FUN_0219d4e4(int ,u8);\n// reflectPartyData\nvoid FUN_0219dc10(BTL_MAIN_MODULE *btlMainWork)\n{\n    if (!btlMainWork->bp->recordDataMode && FUN_0219c988(btlMainWork) == 0)\n    {\n        if (btlMainWork->bp->competitor <= 1)\n        {\n            PokeParty* srcParty;\n\n            FUN_0219d07c(&btlMainWork->m_pokeconForServer, btlMainWork, btlMainWork->m_myClientID);\n            srcParty = FUN_0219d138(&btlMainWork->m_pokeconForServer, btlMainWork->m_myClientID);\n            if (btlMainWork->bp->competitor == 1)\n            {\n                u16 trGroup = FUN_0219d938(btlMainWork, 1);\n                if (FUN_021bd788(trGroup))\n                {\n                    BTL_FIELD_SITUATION * sit = FUN_0219bf60(btlMainWork);\n                    func_0x02020cf0(srcParty, sit->place_id, 0x8000 & 0xffff | btlMainWork->heapId & 0x7FFF);\n                }\n            }\n            if (btlMainWork->bp->competitor == 1)\n            {\n                u16 OrgItemNo;\n                u32 pokeCnt = func_0x0201fdf8(srcParty);\n                for (u32 i = 0; i < pokeCnt; ++i)\n                {\n                    void *ppOrg = func_0x0201ff08(btlMainWork->bp->party[0], i);\n                    void *ppResult = func_0x0201ff08(srcParty, i);\n                    OrgItemNo = func_0x0201ccf8(ppOrg, 6, 0);\n                    if (FUN_021bd884(OrgItemNo, 0x10) == 0)\n                    {\n                        func_0x0201cd1c(ppResult, 6, OrgItemNo);\n                    }\n                    else if (func_0x0201ccf8(ppResult, 6, 0) != OrgItemNo)\n                    {\n                        func_0x0201cd1c(ppResult, 6, 0);\n                    }\n                }\n            }\n            func_0x020200ac(srcParty, btlMainWork->bp->party[0]);\n            for (u32 i = 0; i < func_0x0201fdf8(srcParty); ++i)\n            {\n                func_0x0201ff08(srcParty, i);\n            }\n        }\n        if (btlMainWork->bp->competitor == 0)\n        {\n            u8 uVar2 = FUN_0219c8d0(btlMainWork, btlMainWork->m_myClientID, 0);\n            PokeParty* srcParty;\n            FUN_0219cf78(&btlMainWork->m_pokeconForServer, btlMainWork, uVar2, 1);\n            srcParty = FUN_0219d138(&btlMainWork->m_pokeconForServer, uVar2);\n            func_0x020200ac(srcParty, btlMainWork->bp->party[1]);\n        }\n        if (btlMainWork->bp->competitor != 4)\n        {\n            u32 clientID;\n            for (u32 i = 0; i < 4; i++)\n            {\n                clientID = FUN_0219e048(btlMainWork->m_myClientID, i);\n                for (u32 j = 0; j < 6; ++j)\n                {\n                    btlMainWork->bp->party_state[clientID][j] = 0;\n                }\n\n                if (FUN_0219c408(btlMainWork, clientID)) //IsExistClient\n                {\n                    BTL_PARTY* party = FUN_0219d3c8(&btlMainWork->m_pokeconForClient, clientID);\n                    u32 numMembers = FUN_0219d488(party);\n                    u32 HPSum, MaxHPSum;\n                    u8 orgPokeID = DATA_021D6C24[ clientID ];\n                    u8 idx;\n                    \n                    HPSum = MaxHPSum = 0;\n                    for (u32 j = 0; j < numMembers; ++j)\n                    {\n                        BTL_POKEPARAM* bpp = FUN_0219d4e4(party, j);\n                        idx = FUN_021bac40(bpp) - orgPokeID;\n                        HPSum += FUN_021bb1b4(bpp, 0xd);\n                        MaxHPSum += FUN_021bb1b4(bpp, 0xe);\n                        if (FUN_021bb368(bpp))\n                        {\n                            btlMainWork->bp->party_state[clientID][idx] = 2;\n                        }\n                        else if (FUN_021bbaa8(bpp) != 0)\n                        {\n                            btlMainWork->bp->party_state[clientID][idx] = 1;\n                        }\n\n                    }\n                    btlMainWork->bp->restHPRatio[clientID] = func_0x0208d868(HPSum * 100, MaxHPSum);\n                    \n                }\n            }\n        }\n    }\n}", "context": "typedef unsigned char uint8_t;\ntypedef unsigned short uint16_t;\ntypedef unsigned int uint32_t;\ntypedef int int32_t;\ntypedef unsigned long long uint64_t;\ntypedef signed long long int    s64;\n\ntypedef uint8_t   u8;\ntypedef uint16_t u16;\ntypedef uint32_t u32;\ntypedef int32_t  s32;\n\ntypedef s32 fx32;\n\n#pragma thumb on\n\n#define BTL_CLIENT_NUM 4\n#define BTL_CLIENT_MAX 4\n#define BTL_POS_MAX 6\n#define PARTY_SIZE 6\n#define FALSE 0\n#define NULL ((void *)0)\n\nstruct TINYMT32_T\n{\n    u32 status[4];\n    u32 mat1;\n    u32 mat2;\n};\n\ntypedef struct TINYMT32_T tinymt32_t;\ntypedef struct\n{\n    /*0x0*/ u32 competitor;\n    /*0x4*/ int rule;\n    /*0x8*/ int unk8;\n    /*0xC*/ int unkC;\n    /*0x10*/ u8 unk10[0xA];\n    /*0x1A*/ u16 unk1A;\n    /*0x1C*/ void *netHandle;\n    /*0x20*/ u8 commMode;\n    /*0x21*/ u8 commPos;\n    /*0x22*/ u8 multiMode;\n    /*0x23*/ u8 recordDataMode;\n    /*0x24*/ void* party[ BTL_CLIENT_NUM ];\n    /*0x34*/ void *playerStatus[BTL_CLIENT_NUM];\n    /*0x44*/ u8 unk44[4];\n    /*0x48*/ void *unk48[4];\n    /*0x58*/ u8 unk4C[0x18];\n    /*0x70*/ void *unk70;\n    /*0x74*/ void *configData;\n    /*0x78*/ void *itemData;\n    /*0x7C*/ void *bagCursor;\n    /*0x80*/ void *unk80;\n    /*0x84*/ void *unk84;\n    /*0x88*/ int unk88;\n    /*0x8C*/ u16 LimitTimeGame;\n    /*0x8E*/ u16 LimitTimeCommand;\n    /*0x90*/ u8 unk90[0x7];\n    /*0x97*/ u8 unk97;\n    /*0x98*/ u8 badgeCount;\n    /*0x99*/ u8 unk99[0x7];\n    /*0xA0*/ u16 unka0;\n    /*0xA2*/ u16 unka2;\n    /*0xA4*/ int getMoney;\n    /*0xA8*/ u8 unka8[4];\n    /*0xAC*/ u8 capturedPokeIdx;\n    /*0xAD*/ u8 commServerVer;\n    /*0xAE*/ u16 unk_ae;\n    /*0xB0*/ u8* recBuffer;\n    /*0xB4*/ int unk_b4;\n    /*0xB8*/ tinymt32_t recRandContext;\n    /*0xD4*/ u8 unkD4[13];\n    /*0xDD*/ u8 cmdIllegalFlag : 1;\n             u8 recPlayCompleteFlag : 1;\n            u8 unkdd22: 1;\n    /*0xDD*/ u8 unkdd3 : 2;\n    /*0xDD*/ u8 unkdd4 : 1;\n    /*0xDD*/ u8 unkdd5 : 2;\n    /*0xDE*/ u8 unkde:1;\n    /*0xDF*/ u8 unkdf;\n    /*0xE0*/ u8 unkE0;\n    /*0xE1*/ u8 fightPokeIndex[6];\n    /*0xE7*/ u8 party_state[BTL_CLIENT_NUM][6];\n    /*0x100*/ u32 restHPRatio[BTL_CLIENT_NUM];\n    /*0x110*/ u8 unk110[0x24];\n    /*0x134*/ int unk134;\n    /*0x138*/ u16 unk138;\n    /*0x13A*/ u16 unk13A;\n} BATTLE_SETUP_PARAM;\n\ntypedef struct\n{\n    void* m_pMember[6];\n    u8 m_memberCount;\n    u8 m_numCoverPos;\n    u16 fill;\n}BTL_PARTY;\n\ntypedef struct\n{\n    void* m_member[6];\n    u8 m_memberCount;\n    u8 markingIndex;\n}PokeParty;\n\ntypedef struct\n{\n    /*0x0*/ void *mainModule;\n    /*0x4*/ BTL_PARTY m_party[BTL_CLIENT_MAX];\n    /*0x74*/ PokeParty* m_srcParty[ BTL_CLIENT_MAX ];\n    /*0x84*/ void* m_pokeParam[0x18];\n    /*0xE4*/ int m_fForServer;\n} POKECON;\n// sizeof 0xE8\n\ntypedef struct\n{\n    u8 s[0x10];\n} Reader;\n\ntypedef struct\n{\n    /*0x0*/ void *unk0; //\u67d0\u6587\u672c?\n    /*0x4*/ void *name;\n    /*0x8*/ u16 unk8;\n    /*0xA*/ u16 unkA;\n    /*0xC*/ void *win_msg;\n    /*0x10*/ u16 useItem[4];\n\n    /*0x18*/ u8 unk18;\n    /*0x19*/ u8 trainerSex;\n    /*0x1A*/ u8 trainerGold;\n    /*0x1B*/ u8 pad1;\n    /*0x1C*/ u32 ai_bit;\n    /*0x20*/ int unk20;\n\n    /*0x24*/ u8 grammer_attr;\n    /*0x25*/ u8 grammer_isPlural;\n    /*0x26*/ u8 grammer_attr1;\n    /*0x27*/ u8 grammer_isPlural1;\n\n} TRAINER_DATA;\n// size of 0x28\n\ntypedef struct\n{\n    u8 (*unk_0)(u32, int*);\n    u8 (*unk_4)(u32, int*);\n    int unk8;\n    int unkC;\n}unk_struct_450;\n\ntypedef struct\n{\n    tinymt32_t randomContext;\n    u16 debugFlagBit;\n    u16 LimitTimeGame;\n    u16 LimitTimeCommand;\n    u8 msgSpeed;\n    u8 fWazaEffectEnable : 4;\n    u8 fCommTag : 4;\n\n} SERVER_NOTIFY_PARAM;\n\ntypedef struct\n{\n    u32 count;\n    u8 clientID[BTL_CLIENT_MAX];\n} EscapeInfo;\n\ntypedef struct\n{\n    /*0x0*/ BATTLE_SETUP_PARAM *bp;\n    /*0x4*/ void *m_viewCore;\n    /*0x8*/ int m_server;\n    /*0xC*/ int m_cmdCheckServer;\n    /*0x10*/ void *m_client[4];\n    /*0x20*/ TRAINER_DATA tr_data[4];\n    /*0xC0*/ void *m_playerStatus;\n    /*0xC4*/ u8 m_fClientQuit[BTL_CLIENT_NUM];\n    /*0xC8*/ POKECON m_pokeconForClient;\n    /*0x1B0*/ POKECON m_pokeconForServer;\n    /*0x298*/ void *m_srcParty[4];\n    /*0x2A8*/ void *m_srcPartyForServer[4];\n    /*0x2B8*/ void *m_tmpParty;\n    /*0x2BC*/ void *unk_2bc;\n    /*0x2C0*/ void *m_ppIllusionZoroArc;\n    /*0x2C4*/ void *m_AIDataContainer;\n    /*0x2C8*/ Reader m_recReader; // \u672a\u77e5\u5927\u5c0f\n    /*0x2D8*/ u8 unk2[0x108];\n    /*0x3E0*/ int unk3E0[4];\n    /*0x3F0*/ tinymt32_t m_randomContext;\n    /*0x408*/ SERVER_NOTIFY_PARAM unk408;\n    /*0x428*/ u8 m_posCoverClientID[ BTL_POS_MAX ];                        //\n    /*0x42E*/ u16 unk42E;\n    /*0x430*/ u32 m_regularMoney;\n    /*0x434*/ u32 m_bonusMoney;\n    /*0x438*/ u32 m_loseMoney;\n    /*0x43C*/ int m_msgSpeed;\n    /*0x440*/ u16 m_LimitTimeGame;\n    /*0x442*/ u16 m_LimitTimeCommand;\n    /*0x444*/ int m_serverResult;\n    /*0x448*/ EscapeInfo m_escapeInfo;\n    /*0x450*/ unk_struct_450 unk_450;\n    /*0x460*/ int m_subSeq;\n    /*0x464*/ u8 (*m_mainLoop)(BTL_MAIN_MODULE);\n    /*0x468*/ u16 heapId;\n    /*0x46A*/ u8 unk46A;\n    /*0x46B*/ u8 m_numClients;\n    /*0x46C*/ u8 m_myClientID;\n    /*0x46D*/ u8 m_myOrgPos;\n    /*0x46E*/ u8 m_ImServer;\n    /*0x46F*/ u8 unk46f;\n    /*0x470*/ u8 m_MultiAIDataSeq;\n    /*0x471*/ u8 m_MultiAIClientNum;\n    /*0x472*/ u8 m_MultiAIClientID;\n    /*0x473*/ u8 m_fCommError : 1;\n    u8 m_fCommErrorMainQuit : 1;\n    u8 m_fWazaEffectEnable : 1;\n    u8 m_fGetMoneyFixed : 1;\n    u8 unk473Flag : 1;\n    u8 m_fBGMFadeOutDisable : 1;\n    u8 m_fLoseMoneyFixed : 1;\n    u8 m_fSoundPushed : 1;\n} BTL_MAIN_MODULE;\n\ntypedef struct\n{\n    void *ppSrc;\n    void *ppFake;\n\n    u32 exp;\n    u16 monsno;\n} BTL_POKEPARAM;\n\ntypedef struct\n{\n    /*0x0*/ u32 weather;\n    /*0x4*/ u32 envID;\n    /*0x8*/ u8 hour;\n    /*0x9*/ u8 minute;\n    /*0xA*/ u16 place_id;\n    /*.................*/\n} BTL_FIELD_SITUATION;\n\ntypedef enum\n{\n    BTL_EXPOS_DEFAULT = 0, ///< \u81ea\u5206\u3060\u3051\n\n    BTL_EXPOS_AREA_ENEMY,   ///< \uff08\u653b\u6483\u7bc4\u56f2\u5185\u306e\uff09\u76f8\u624b\u5168\u90e8\n    BTL_EXPOS_AREA_OTHERS,  ///< \uff08\u653b\u6483\u7bc4\u56f2\u5185\u306e\uff09\u81ea\u5206\u4ee5\u5916\u5168\u90e8\n    BTL_EXPOS_AREA_MYTEAM,  ///< \uff08\u653b\u6483\u7bc4\u56f2\u5185\u306e\uff09\u5473\u65b9\u5168\u90e8\n    BTL_EXPOS_AREA_FRIENDS, ///< \uff08\u653b\u6483\u7bc4\u56f2\u5185\u306e\uff09\u81ea\u5206\u4ee5\u5916\u306e\u5473\u65b9\u5168\u90e8\n    BTL_EXPOS_AREA_ALL,     ///< \uff08\u653b\u6483\u7bc4\u56f2\u5185\u306e\uff09\u6575\u30fb\u5473\u65b9\u5168\u90e8\n\n    BTL_EXPOS_FULL_ENEMY,   ///< \uff08\u5168\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\uff09\u76f8\u624b\u30dd\u30b1\u5168\u90e8\n    BTL_EXPOS_FULL_FRIENDS, ///< \uff08\u5168\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\uff09\u81ea\u5206\u4ee5\u5916\u306e\u5473\u65b9\u30dd\u30b1\u5168\u90e8\n    BTL_EXPOS_FULL_ALL,     ///< \uff08\u5168\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\uff09\u30dd\u30b1\u5168\u90e8\n\n    BTL_EXPOS_NEXT_FRIENDS, ///< \uff08\u81ea\u5206\u306e\u96a3\u306e\uff09\u5473\u65b9\u5168\u90e8\n\n    //  BTL_EXPOS_AREA_ENEMY\n\n} BtlExPosType;\n\ntypedef enum\n{\n    BTL_SIDE_1ST,\n    BTL_SIDE_2ND,\n\n    BTL_SIDE_MAX,\n\n} BtlSide_tag;\n\ntypedef u8 BtlPokePos;\n\ntypedef struct\n{\n    u16 numEnemys;\n    u16 numFriends;\n    BtlPokePos enemyPos[3];\n    BtlPokePos friendPos[3];\n} BTL_VALIABLE_ATTACK_AREA;\n\nenum\n{\n\n    BTL_RULE_SINGLE,\n    BTL_RULE_DOUBLE,\n    BTL_RULE_TRIPLE,\n    BTL_RULE_ROTATION,\n    BTL_RULE_BAND,\n    BTL_ROTATION_FRONTPOS_NUM = 1,\n    BTL_ROTATION_BACKPOS_NUM = 2,\n\n    BTL_ROTATION_VISIBLE_POS_NUM = BTL_ROTATION_FRONTPOS_NUM + BTL_ROTATION_BACKPOS_NUM,\n};", "diff_flags": [], "diff_label": "ovy167_219dc10", "libraries": []}